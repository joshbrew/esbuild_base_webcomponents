(()=>{var g=Object.defineProperty;var f=(n,e,i)=>e in n?g(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i;var m=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var r=(n,e,i)=>(f(n,typeof e!="symbol"?e+"":e,i),i);var u=m((E,w)=>{w.exports="<div>Test worked!</div>"});var d=class extends HTMLElement{constructor(){super();r(this,"template",e=>`<div> Custom Fragment Props: ${JSON.stringify(e)} </div>`);r(this,"props",{test:!0});r(this,"oncreate");r(this,"onresize");r(this,"ondelete");r(this,"onchanged");r(this,"fragment");r(this,"delete",()=>{this.fragment=void 0,this.remove(),this.ondelete&&this.ondelete(this.props)});r(this,"render",(e=this.props)=>{typeof this.template=="function"?this.templateString=this.template(e):this.templateString=this.template;let i=document.createElement("template");i.innerHTML=this.templateString;let s=i.content;this.fragment&&this.removeChild(this.fragment),this.fragment=s,this.appendChild(s),this.oncreate&&this.oncreate(e)});r(this,"state",{pushToState:{},data:{},triggers:{},setState(e){if(Object.assign(this.pushToState,e),Object.keys(this.triggers).length>0)for(let i of Object.getOwnPropertyNames(this.triggers))this.pushToState[i]&&(this.data[i]=this.pushToState[i],delete this.pushToState[i],this.triggers[i].forEach(s=>{s.onchanged(this.data[i])}));return this.pushToState},subscribeTrigger(e,i=s=>{}){if(e){this.triggers[e]||(this.triggers[e]=[]);let s=this.triggers[e].length;return this.triggers[e].push({idx:s,onchanged:i}),this.triggers[e].length-1}else return},unsubscribeTrigger(e,i){let s,t=this.triggers[e];if(t)if(!i)delete this.triggers[e];else return t.find(l=>{if(l.idx===i)return!0})&&t.splice(s,1),!0},subscribeTriggerOnce(e=void 0,i=s=>{}){let s,t=h=>{i(h),this.unsubscribeTrigger(e,s)};s=this.subscribeTrigger(e,t)}})}attributeChangedCallback(e,i,s){if(e==="onchanged"){let t=s;typeof t=="string"&&(t=o(t)),typeof t=="function"&&(this.onchanged=t,this.state.data.props=this.props,this.state.unsubscribeTrigger("props"),this.state.subscribeTrigger("props",this.onchanged))}if(e==="onresize"){let t=s;if(typeof t=="string"&&(t=o(t)),typeof t=="function"){try{window.removeEventListener("resize",this.onresize)}catch(h){}this.onresize=t,window.addEventListener("resize",this.onresize)}}if(e==="ondelete"){let t=s;typeof t=="string"&&(t=o(t)),typeof t=="function"&&(this.ondelete=()=>{window.removeEventListener("resize",this.onresize),this.state.unsubscribeTrigger("props"),t()})}if(e==="oncreate"){let t=s;typeof t=="string"&&(t=o(t)),typeof t=="function"&&(this.oncreate=t)}if(e==="props"){let t=s;typeof t=="string"&&(t=JSON.parse(t)),Object.assign(this.props,t),this.state.setState({props:this.props})}if(e==="template"){let t=s;this.template=options.template,typeof t=="function"?this.templateString=this.template(this.props):this.templateString=t,this.render(this.props)}}connectedCallback(){if(this.render(this.props),typeof this.onresize=="function"&&window.addEventListener("resize",this.onresize),typeof this.ondelete=="function"){let e=this.ondelete;this.ondelete=()=>{window.removeEventListener("resize",this.onresize),this.state.unsubscribeTrigger("props"),e()}}typeof this.onchanged=="function"&&(this.state.data.props=this.props,this.state.subscribeTrigger("props",this.onchanged))}get props(){return this.props}set props(e={}){this.setAttribute("props",e)}get template(){return this.template}set template(e){this.setAttribute("template",e)}get onchanged(){return this.onchanged}set onchanged(e){this.setAttribute("onchanged",e)}get onresize(){return this.props}set onresize(e){this.setAttribute("onresize",e)}get ondelete(){return this.props}set ondelete(e){this.setAttribute("ondelete",e)}get oncreate(){return this.oncreate}set oncreate(e){this.setAttribute("oncreated",e)}};r(d,"observedAttributes",["props","options","onchanged","onresize","ondelete","oncreate","template"]);function p(n,e,i=null){i?e?window.customElements.define(e,n,{extends:i}):window.customElements.define(n.name.toLowerCase()+"-",n,{extends:i}):e?window.customElements.define(e,n):window.customElements.define(n.name.toLowerCase()+"-",n)}function y(n=""){return n+Math.floor(Math.random()*1e15)}function o(method){let getFunctionBody=n=>n.replace(/^\W*(function[^{]+\{([\s\S]*)\}|[^=]+=>[^{]*\{([\s\S]*)\}|[^=]+=>(.+))/i,"$2$3$4"),getFunctionHead=n=>{let e=n.indexOf(")");return n.slice(0,n.indexOf("{",e)+1)},newFuncHead=getFunctionHead(method),newFuncBody=getFunctionBody(method),newFunc;if(newFuncHead.includes("function ")){let n=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(n,newFuncBody)}else if(newFuncHead.substring(0,6)===newFuncBody.substring(0,6)){let n=newFuncHead.split("(")[1].split(")")[0];newFunc=new Function(n,newFuncBody.substring(newFuncBody.indexOf("{")+1,newFuncBody.length-1))}else newFunc=eval(newFuncHead+newFuncBody+"}");return newFunc}var b=u(),a=class extends d{constructor(){super(...arguments);r(this,"template",b)}};p(a,"custom-");var c=document.createElement("custom-");console.log("custom element:",c,c.__proto__);})();
//# sourceMappingURL=app.js.map
